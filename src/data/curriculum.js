// Unified curriculum - returns lessons based on current language

const jsCurriculum = [
    {
        id: 1, slug: 'les-bases', title: 'Les Bases', subtitle: 'Variables, types et console.log',
        icon: 'üü¢', color: '#00ff88', requiredXP: 0,
        lessons: [
            { id: 'js-l1-01', title: 'Ton premier programme', theory: `<h2>Bienvenue dans JavaScript !</h2><p>JavaScript est <strong>le langage de programmation du web</strong>. Cree en 1995, il est aujourd'hui utilise partout : sites web, applications mobiles, serveurs, et meme intelligence artificielle !</p><p>Chaque site que tu visites (YouTube, Instagram, Google...) utilise JavaScript pour etre interactif.</p><h3>Ta premiere fonction : console.log()</h3><p><code>console.log()</code> est une fonction qui <strong>affiche un message</strong> dans la console du navigateur. C'est l'outil #1 du developpeur pour verifier que son code fonctionne.</p><pre><code>console.log("Bonjour le monde !");</code></pre><p>Tout ce qui est entre les guillemets <code>"..."</code> sera affiche tel quel. N'oublie pas le <code>;</code> a la fin de chaque instruction !</p><div class="tip"><strong>üí° Astuce :</strong> Tu peux aussi utiliser des guillemets simples <code>'...'</code> ‚Äî les deux fonctionnent de la meme maniere.</div><p class="lesson-extra">Tu affiches un message avec console.log, c'est la sortie de base pour verifier ton code. Dans l'exemple, la chaine entre guillemets est imprimee telle quelle.</p>`, exercise: { instruction: 'Utilise <strong>console.log()</strong> pour afficher <strong>"Salut JS !"</strong>', starterCode: '// Ecris ton code ici\n', validation: { type: 'output', expected: 'Salut JS !' }, hints: ['Ecris console.log("Salut JS !");', 'N\'oublie pas les guillemets'], xpReward: 50 } },
            { id: 'js-l1-02', title: 'Les variables avec let', theory: `<h2>Les variables</h2><p>Une variable est comme une <strong>boite etiquetee</strong> dans laquelle on range une valeur. Le nom de la variable est l'etiquette, et la valeur est ce qu'il y a dedans.</p><h3>Creer une variable avec let</h3><p>On utilise le mot-cle <code>let</code> pour <strong>declarer</strong> (creer) une variable :</p><pre><code>let prenom = "Marie";\nconsole.log(prenom); // Affiche: Marie</code></pre><p>Ici, <code>prenom</code> est le nom de la variable, et <code>"Marie"</code> est sa valeur. Le signe <code>=</code> n'est pas une egalite mathematique, c'est une <strong>affectation</strong> : on met la valeur a droite dans la boite a gauche.</p><h3>Modifier une variable</h3><p>On peut changer la valeur d'une variable <code>let</code> a tout moment :</p><pre><code>let age = 20;\nage = 21; // On ne remet pas "let" !\nconsole.log(age); // Affiche: 21</code></pre><div class="tip"><strong>üí° Regles de nommage :</strong> Un nom de variable ne peut pas commencer par un chiffre, ne contient pas d'espaces, et est sensible a la casse (<code>nom</code> ‚â† <code>Nom</code>). Utilise le <strong>camelCase</strong> : <code>monPrenom</code>, <code>ageUtilisateur</code>.</div><p class="lesson-extra">Une variable avec let sert a stocker une valeur qui peut changer. L'exemple montre la declaration, puis l'affichage de la valeur.</p>`, exercise: { instruction: 'Declare une variable <strong>nom</strong> avec la valeur <strong>"JavaScript"</strong> et affiche-la', starterCode: '// Declare ta variable ici\n\n// Affiche-la\n', validation: { type: 'output', expected: 'JavaScript' }, hints: ['let nom = "JavaScript";', 'Puis console.log(nom);'], xpReward: 50 } },
            { id: 'js-l1-03', title: 'Les constantes avec const', theory: `<h2>const - les valeurs qui ne changent pas</h2><p><code>const</code> fonctionne comme <code>let</code>, mais la valeur <strong>ne peut plus etre modifiee</strong> apres sa creation. On dit qu'elle est <strong>immutable</strong>.</p><pre><code>const PI = 3.14159;\nconsole.log(PI); // 3.14159\n\nPI = 3.14; // ‚ùå ERREUR ! On ne peut pas modifier une const</code></pre><h3>Quand utiliser const vs let ?</h3><p>La bonne pratique est d'utiliser <code>const</code> <strong>par defaut</strong>, et <code>let</code> <strong>seulement</strong> quand tu sais que la valeur va changer. Cela rend ton code plus previsible et plus facile a comprendre.</p><pre><code>const NOM_APP = "Code Master";  // ne changera jamais ‚Üí const\nlet score = 0;                   // va augmenter ‚Üí let\nscore = 10;                      // OK !</code></pre><div class="tip"><strong>üí° Convention :</strong> Pour les constantes "globales" (comme PI ou un nom d'application), on utilise souvent des MAJUSCULES avec des underscores : <code>MAX_ESSAIS</code>, <code>COULEUR_DEFAUT</code>.</div><p class="lesson-extra">Une constante avec const ne doit pas etre modifiee apres creation. L'exemple montre qu'une reassignation provoque une erreur.</p>`, exercise: { instruction: 'Declare une constante <strong>PAYS</strong> avec la valeur <strong>"France"</strong> et affiche-la', starterCode: '// Declare ta constante\n\n// Affiche-la\n', validation: { type: 'output', expected: 'France' }, hints: ['const PAYS = "France";', 'console.log(PAYS);'], xpReward: 50 } },
            { id: 'js-l1-04', title: 'Les types : String et Number', theory: `<h2>Les types de donnees</h2><p>En JavaScript, chaque valeur a un <strong>type</strong> qui determine ce qu'on peut faire avec. Les deux types les plus courants sont :</p><h3>String (texte)</h3><p>Un String est du texte, <strong>toujours entre guillemets</strong> (doubles <code>"..."</code> ou simples <code>'...'</code>) :</p><pre><code>let message = "Bonjour";\nlet ville = 'Paris';</code></pre><p>Meme un nombre entre guillemets est un String : <code>"42"</code> est du texte, pas un nombre !</p><h3>Number (nombre)</h3><p>Les nombres s'ecrivent <strong>sans guillemets</strong>. JavaScript ne fait pas de difference entre entiers et decimaux :</p><pre><code>let age = 25;      // entier\nlet prix = 9.99;   // decimal\nlet negatif = -10; // negatif</code></pre><h3>Verifier le type avec typeof</h3><p>L'operateur <code>typeof</code> te dit quel est le type d'une valeur :</p><pre><code>console.log(typeof "hello"); // "string"\nconsole.log(typeof 42);      // "number"\nconsole.log(typeof "42");    // "string" ‚Üê attention !</code></pre><div class="tip"><strong>üí° Piege courant :</strong> <code>"5" + 3</code> donne <code>"53"</code> (concatenation de strings) et non <code>8</code>. JavaScript convertit le nombre en texte quand il rencontre un <code>+</code> avec un string.</div><p class="lesson-extra">Les strings sont du texte entre guillemets et les numbers sont des valeurs numeriques. L'exemple et typeof te montrent la difference entre "42" et 42.</p>`, exercise: { instruction: 'Cree <strong>age</strong> (number: 25) et <strong>ville</strong> (string: "Paris"). Affiche le typeof de chacune.', starterCode: '// Cree tes variables\n\n\n// Affiche leur type\nconsole.log(typeof age);\nconsole.log(typeof ville);\n', validation: { type: 'output', expected: ['number', 'string'] }, hints: ['let age = 25;', 'let ville = "Paris";'], xpReward: 50 } },
            { id: 'js-l1-05', title: 'Boolean et null/undefined', theory: `<h2>Boolean, null et undefined</h2><h3>Boolean : vrai ou faux</h3><p>Un <strong>Boolean</strong> ne peut avoir que deux valeurs : <code>true</code> (vrai) ou <code>false</code> (faux). C'est le type utilise pour les conditions et les decisions dans ton code.</p><pre><code>let estMajeur = true;\nlet aPermis = false;\nconsole.log(typeof estMajeur); // "boolean"</code></pre><h3>null vs undefined</h3><p>Ces deux valeurs representent "rien", mais de maniere differente :</p><ul><li><code>null</code> : absence <strong>intentionnelle</strong> de valeur. C'est toi qui decides de mettre "rien".</li><li><code>undefined</code> : la variable existe mais <strong>n'a pas encore de valeur</strong>. C'est JavaScript qui la met.</li></ul><pre><code>let a;                // a vaut undefined (pas de valeur assignee)\nlet b = null;         // b vaut null (on a choisi de mettre "rien")\nconsole.log(a);       // undefined\nconsole.log(b);       // null</code></pre><div class="tip"><strong>üí° En resume :</strong> JavaScript a 5 types primitifs principaux : <code>string</code>, <code>number</code>, <code>boolean</code>, <code>null</code> et <code>undefined</code>. Maitriser ces types est la base de tout programme.</div><p class="lesson-extra">Un boolean vaut true ou false, utile pour les conditions. null et undefined indiquent l'absence de valeur mais pas pour les memes raisons.</p>`, exercise: { instruction: 'Cree un boolean <strong>jaimejs</strong> avec la valeur <strong>true</strong> et affiche-le', starterCode: '// Ton boolean\n\n', validation: { type: 'output', expected: 'true' }, hints: ['let jaimejs = true;', 'console.log(jaimejs);'], xpReward: 50 } },
            { id: 'js-l1-06', title: 'Concatenation de strings', theory: `<h2>Assembler des textes</h2><p>Souvent, tu voudras combiner du texte avec des variables. Il y a deux facons de faire :</p><h3>Methode 1 : L'operateur +</h3><p>Le <code>+</code> entre deux strings les "colle" ensemble. On appelle ca la <strong>concatenation</strong> :</p><pre><code>let prenom = "Jean";\nlet message = "Bonjour " + prenom + " !";\nconsole.log(message); // "Bonjour Jean !"</code></pre><p>Attention aux espaces ! <code>"Bonjour" + "Jean"</code> donne <code>"BonjourJean"</code> sans espace.</p><h3>Methode 2 : Les template literals (recommande)</h3><p>Plus lisible, on utilise des <strong>backticks</strong> <code>\`...\`</code> avec <code>\${...}</code> pour inserer des variables :</p><pre><code>let age = 20;\nlet nom = "Marie";\nconsole.log(\`Je m'appelle \${nom} et j'ai \${age} ans\`);\n// "Je m'appelle Marie et j'ai 20 ans"</code></pre><p>A l'interieur de <code>\${...}</code>, tu peux mettre n'importe quelle expression JavaScript :</p><pre><code>console.log(\`5 + 3 = \${5 + 3}\`); // "5 + 3 = 8"</code></pre><div class="tip"><strong>üí° Preference :</strong> Les template literals sont la methode moderne et preferee. Utilise-les des que possible !</div><p class="lesson-extra">Tu peux assembler du texte avec l'operateur + ou avec les template literals. L'exemple montre comment inserer des variables dans une phrase.</p>`, exercise: { instruction: 'Cree <strong>prenom</strong> = "Aldo" et <strong>age</strong> = 20. Affiche "Je m\'appelle Aldo et j\'ai 20 ans" avec template literals.', starterCode: 'let prenom = "Aldo";\nlet age = 20;\n\n// Affiche le message\n', validation: { type: 'output', expected: "Je m'appelle Aldo et j'ai 20 ans" }, hints: ['console.log(`Je m\'appelle ${prenom} et j\'ai ${age} ans`);'], xpReward: 50 } },
            { id: 'js-l1-07', title: 'Operations mathematiques', theory: `<h2>Les operateurs mathematiques</h2><p>JavaScript peut faire toutes les operations mathematiques de base, et quelques-unes en plus :</p><pre><code>console.log(10 + 3);  // 13  (addition)\nconsole.log(10 - 3);  // 7   (soustraction)\nconsole.log(10 * 3);  // 30  (multiplication)\nconsole.log(10 / 3);  // 3.333...  (division)\nconsole.log(10 % 3);  // 1   (modulo = reste de la division)\nconsole.log(2 ** 3);  // 8   (puissance : 2 x 2 x 2)</code></pre><h3>L'operateur modulo (%)</h3><p>Le <strong>modulo</strong> donne le <strong>reste</strong> de la division entiere. Tres utile pour savoir si un nombre est pair :</p><pre><code>console.log(10 % 2); // 0 ‚Üí 10 est pair\nconsole.log(7 % 2);  // 1 ‚Üí 7 est impair</code></pre><h3>Priorite des operations</h3><p>Comme en maths, la multiplication et la division passent <strong>avant</strong> l'addition. Utilise des parentheses pour forcer l'ordre :</p><pre><code>console.log(2 + 3 * 4);   // 14 (pas 20 !)\nconsole.log((2 + 3) * 4); // 20</code></pre><p class="lesson-extra">Les operateurs + - * / % ** permettent de faire des calculs. L'exemple montre aussi la priorite des operations et l'usage des parentheses.</p>`, exercise: { instruction: 'Calcule et affiche le resultat de <strong>(15 + 5) * 2</strong>', starterCode: '// Calcule et affiche\n', validation: { type: 'output', expected: '40' }, hints: ['console.log((15 + 5) * 2);'], xpReward: 50 } },
            { id: 'js-l1-08', title: 'Recapitulatif Niveau 1', theory: `<h2>Recapitulatif du niveau 1</h2><p>Bravo ! Tu as appris les fondamentaux de JavaScript. Voici un resume de tout ce que tu sais maintenant :</p><h3>Ce que tu maitrises</h3><ul><li><code>console.log()</code> pour afficher des valeurs dans la console</li><li><code>let</code> pour les variables modifiables, <code>const</code> pour les constantes</li><li>Les 5 types primitifs : <strong>String</strong>, <strong>Number</strong>, <strong>Boolean</strong>, <strong>null</strong>, <strong>undefined</strong></li><li><code>typeof</code> pour verifier le type d'une valeur</li><li>Les template literals <code>\`\${variable}\`</code> pour assembler du texte</li><li>Les operateurs mathematiques : <code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code> <code>**</code></li></ul><h3>Bonnes pratiques</h3><ul><li>Utilise <code>const</code> par defaut, <code>let</code> seulement si necessaire</li><li>Donne des noms explicites a tes variables (<code>ageUtilisateur</code> plutot que <code>x</code>)</li><li>Prefere les template literals a la concatenation avec <code>+</code></li></ul><p>L'exercice suivant combine tout ca. C'est parti !</p><p class="lesson-extra">Cette lecon resume les bases vues au niveau 1. L'exercice final combine plusieurs notions pour verifier que tu les maitrises.</p>`, exercise: { instruction: 'Cree <strong>a = 8</strong> et <strong>b = 3</strong>. Affiche leur somme, produit et le type du produit.', starterCode: 'let a = 8;\nlet b = 3;\n\n// Affiche la somme\n\n// Affiche le produit\n\n// Affiche le type du produit\n', validation: { type: 'output', expected: ['11', '24', 'number'] }, hints: ['console.log(a + b);', 'console.log(a * b);', 'console.log(typeof (a * b));'], xpReward: 75 } },
        ],
    },
    {
        id: 2, slug: 'conditions', title: 'Operateurs & Conditions', subtitle: 'if/else, switch et comparaisons',
        icon: 'üîÄ', color: '#00ccff', requiredXP: 300,
        lessons: [
            { id: 'js-l2-01', title: 'Comparaisons', theory: `<h2>Les operateurs de comparaison</h2><p>Les comparaisons permettent de comparer deux valeurs et renvoient toujours un <strong>boolean</strong> (<code>true</code> ou <code>false</code>).</p><pre><code>console.log(5 === 5);   // true  (egal en valeur ET en type)\nconsole.log(5 === "5"); // false (meme valeur, mais types differents !)\nconsole.log(5 !== 3);   // true  (different)\nconsole.log(5 > 3);     // true  (superieur)\nconsole.log(5 <= 3);    // false (inferieur ou egal)</code></pre><h3>=== vs == : attention !</h3><p><code>===</code> (strict) compare la valeur <strong>et</strong> le type. <code>==</code> (lache) ne compare que la valeur et peut donner des resultats surprenants :</p><pre><code>console.log(5 == "5");  // true  ‚Üê piege !\nconsole.log(5 === "5"); // false ‚Üê correct</code></pre><div class="tip"><strong>üí° Regle d'or :</strong> Utilise <strong>toujours</strong> <code>===</code> et <code>!==</code> pour eviter les bugs. Oublie <code>==</code> !</div><p class="lesson-extra">Les comparaisons renvoient toujours true ou false. L'exemple montre la difference entre egalite stricte et comparaison de types.</p>`, exercise: { instruction: 'Affiche : <strong>10 > 5</strong>, <strong>"hello" === "hello"</strong>, <strong>3 !== 3</strong>', starterCode: '// Affiche les 3 comparaisons\n', validation: { type: 'output', expected: ['true', 'true', 'false'] }, hints: ['console.log(10 > 5);', 'console.log("hello" === "hello");'], xpReward: 50 } },
            { id: 'js-l2-02', title: 'if / else', theory: `<h2>Les conditions : if / else</h2><p>Les conditions permettent a ton programme de <strong>prendre des decisions</strong>. C'est comme dans la vie : "Si il pleut, je prends un parapluie, sinon je sors comme ca."</p><h3>La structure if / else</h3><pre><code>let age = 18;\nif (age >= 18) {\n  console.log("Tu es majeur !");\n} else {\n  console.log("Tu es mineur !");\n}</code></pre><p>Le code entre les <code>{}</code> du <code>if</code> ne s'execute <strong>que si</strong> la condition est <code>true</code>. Sinon, c'est le bloc <code>else</code> qui s'execute.</p><h3>Ajouter des conditions avec else if</h3><p>Tu peux enchainer plusieurs conditions :</p><pre><code>if (note >= 16) {\n  console.log("Tres bien");\n} else if (note >= 12) {\n  console.log("Bien");\n} else {\n  console.log("A ameliorer");\n}</code></pre><div class="tip"><strong>üí° Important :</strong> La condition entre parentheses doit etre une expression qui vaut <code>true</code> ou <code>false</code>. Le bloc <code>else</code> est optionnel.</div><p class="lesson-extra">if/else execute un bloc selon une condition. L'exemple illustre un choix simple et comment le code change selon la valeur.</p>`, exercise: { instruction: '<strong>temperature</strong> vaut 30. Si >= 30, affiche "Il fait chaud !", sinon "Il fait bon."', starterCode: 'let temperature = 30;\n\n// Ta condition ici\n', validation: { type: 'output', expected: 'Il fait chaud !' }, hints: ['if (temperature >= 30) {', '  console.log("Il fait chaud !");'], xpReward: 50 } },
            { id: 'js-l2-03', title: 'Operateurs logiques', theory: `<h2>Les operateurs logiques : ET, OU, NON</h2><p>Parfois, une seule condition ne suffit pas. Les operateurs logiques permettent de <strong>combiner plusieurs conditions</strong>.</p><h3>&& (ET logique)</h3><p>Les <strong>deux</strong> conditions doivent etre vraies :</p><pre><code>let age = 20;\nlet permis = true;\nif (age >= 18 && permis) {\n  console.log("Tu peux conduire !");\n}\n// true && true ‚Üí true ‚úÖ</code></pre><h3>|| (OU logique)</h3><p><strong>Au moins une</strong> condition doit etre vraie :</p><pre><code>if (jour === "samedi" || jour === "dimanche") {\n  console.log("C'est le weekend !");\n}</code></pre><h3>! (NON logique)</h3><p>Inverse une valeur booleenne :</p><pre><code>console.log(!true);   // false\nconsole.log(!false);  // true\nlet connecte = false;\nif (!connecte) {\n  console.log("Veuillez vous connecter");\n}</code></pre><div class="tip"><strong>üí° Priorite :</strong> <code>!</code> s'execute avant <code>&&</code>, qui s'execute avant <code>||</code>. En cas de doute, utilise des parentheses.</div><p class="lesson-extra">Les operateurs logiques combinent plusieurs conditions. L'exemple montre && pour ET, || pour OU et ! pour NON.</p>`, exercise: { instruction: 'Cree <strong>age = 25</strong> et <strong>etudiant = true</strong>. Si age < 30 ET etudiant, affiche "Reduction etudiant !"', starterCode: 'let age = 25;\nlet etudiant = true;\n\n// Ta condition\n', validation: { type: 'output', expected: 'Reduction etudiant !' }, hints: ['if (age < 30 && etudiant) {'], xpReward: 50 } },
            { id: 'js-l2-04', title: 'L\'operateur ternaire', theory: `<h2>L'operateur ternaire</h2><p>Le ternaire est un <strong>raccourci</strong> pour un <code>if/else</code> simple, ecrit sur une seule ligne. Il est tres utilise en JavaScript moderne.</p><h3>Syntaxe</h3><pre><code>condition ? valeurSiVrai : valeurSiFaux</code></pre><h3>Exemple</h3><pre><code>let age = 20;\nlet statut = age >= 18 ? "majeur" : "mineur";\nconsole.log(statut); // "majeur"</code></pre><p>C'est exactement equivalent a :</p><pre><code>let statut;\nif (age >= 18) {\n  statut = "majeur";\n} else {\n  statut = "mineur";\n}</code></pre><p>On peut aussi l'utiliser directement dans un <code>console.log</code> :</p><pre><code>console.log(score >= 50 ? "Reussi" : "Echec");</code></pre><div class="tip"><strong>üí° Conseil :</strong> N'imbrique pas les ternaires (<code>a ? b ? c : d : e</code>) ‚Äî ca devient vite illisible. Utilise <code>if/else</code> pour les cas complexes.</div><p class="lesson-extra">Le ternaire est une version courte de if/else. L'exemple montre comment choisir une valeur en une seule ligne.</p>`, exercise: { instruction: 'Si <strong>score = 75</strong> >= 50, affiche "Reussi", sinon "Echec" (ternaire)', starterCode: 'let score = 75;\n\n// Utilise un ternaire\n', validation: { type: 'output', expected: 'Reussi' }, hints: ['console.log(score >= 50 ? "Reussi" : "Echec");'], xpReward: 50 } },
            { id: 'js-l2-05', title: 'switch / case', theory: `<h2>Le switch / case</h2><p>Quand tu as beaucoup de valeurs a tester pour une meme variable, <code>switch</code> est plus lisible que des <code>if/else if</code> en chaine.</p><pre><code>let jour = "lundi";\nswitch (jour) {\n  case "lundi":\n  case "mardi":\n    console.log("Debut de semaine");\n    break;\n  case "vendredi":\n    console.log("Bientot le weekend !");\n    break;\n  default:\n    console.log("Jour normal");\n}</code></pre><h3>Points importants</h3><ul><li><code>break</code> est <strong>obligatoire</strong> pour sortir du switch. Sans lui, le code continue dans les cas suivants (effet "fall-through").</li><li><code>default</code> s'execute si aucun <code>case</code> ne correspond. C'est comme le <code>else</code> d'un <code>if</code>.</li><li>Le switch utilise <code>===</code> (comparaison stricte) pour comparer.</li></ul><div class="tip"><strong>üí° Quand l'utiliser :</strong> Le switch est ideal pour tester une variable contre plusieurs valeurs exactes (jours, couleurs, roles...). Pour des plages de valeurs (> 10, < 50), prefere <code>if/else</code>.</div><p class="lesson-extra">switch compare une variable a plusieurs valeurs possibles. L'exemple illustre l'importance de break et le cas default.</p>`, exercise: { instruction: 'Switch pour <strong>fruit = "pomme"</strong>. "pomme" -> "Rouge", "banane" -> "Jaune", default -> "Inconnu"', starterCode: 'let fruit = "pomme";\n\n// Ton switch\n', validation: { type: 'output', expected: 'Rouge' }, hints: ['switch (fruit) {', '  case "pomme":'], xpReward: 50 } },
        ],
    },
    {
        id: 3, slug: 'boucles', title: 'Boucles', subtitle: 'for, while et do-while',
        icon: 'üîÑ', color: '#ff6b9d', requiredXP: 700,
        lessons: [
            { id: 'js-l3-01', title: 'La boucle for', theory: `<h2>La boucle for</h2><p>Les boucles permettent de <strong>repeter du code</strong> plusieurs fois sans le recopier. La boucle <code>for</code> est la plus courante.</p><h3>Anatomie d'un for</h3><pre><code>for (let i = 0; i < 5; i++) {\n  console.log(i);\n}\n// Affiche: 0, 1, 2, 3, 4</code></pre><p>La boucle <code>for</code> se compose de 3 parties separees par des <code>;</code> :</p><ol><li><strong>Initialisation</strong> : <code>let i = 0</code> ‚Äî point de depart (execute une seule fois)</li><li><strong>Condition</strong> : <code>i < 5</code> ‚Äî tant que c'est vrai, on continue</li><li><strong>Incrementation</strong> : <code>i++</code> ‚Äî ce qui change a chaque tour (ici +1)</li></ol><h3>Autre exemple</h3><pre><code>// Compter de 2 en 2\nfor (let i = 0; i <= 10; i += 2) {\n  console.log(i); // 0, 2, 4, 6, 8, 10\n}</code></pre><div class="tip"><strong>üí° i++ est un raccourci</strong> pour <code>i = i + 1</code>. De meme, <code>i += 2</code> est un raccourci pour <code>i = i + 2</code>.</div><p class="lesson-extra">La boucle for repete un bloc un nombre de fois. L'exemple montre comment parcourir des valeurs avec un compteur.</p>`, exercise: { instruction: 'Affiche les nombres de <strong>1 a 5</strong>', starterCode: '// Ta boucle for\n', validation: { type: 'output', expected: ['1', '2', '3', '4', '5'] }, hints: ['for (let i = 1; i <= 5; i++) {'], xpReward: 50 } },
            { id: 'js-l3-02', title: 'La boucle while', theory: `<h2>La boucle while</h2><pre><code>let compteur = 0;\nwhile (compteur < 3) {\n  console.log(compteur);\n  compteur++;\n}</code></pre><p class="lesson-extra">La boucle while repete tant qu'une condition est vraie. L'exemple montre un compteur qui evolue a chaque tour.</p>`, exercise: { instruction: 'Affiche les nombres de <strong>10 a 6</strong> (decroissant)', starterCode: 'let n = 10;\n\n// Ta boucle while\n', validation: { type: 'output', expected: ['10', '9', '8', '7', '6'] }, hints: ['while (n >= 6) {'], xpReward: 50 } },
            { id: 'js-l3-03', title: 'break et continue', theory: `<h2>Controler les boucles</h2><p><code>break</code> arrete la boucle, <code>continue</code> saute a l'iteration suivante.</p><p class="lesson-extra">break arrete la boucle et continue saute une iteration. L'exemple montre comment controler finement l'execution.</p>`, exercise: { instruction: 'Affiche 1 a 10, mais <strong>saute le 5</strong>', starterCode: '// Boucle de 1 a 10 en sautant 5\n', validation: { type: 'output', expected: ['1', '2', '3', '4', '6', '7', '8', '9', '10'] }, hints: ['if (i === 5) continue;'], xpReward: 50 } },
            { id: 'js-l3-04', title: 'Boucles imbriquees', theory: `<h2>Boucles dans des boucles</h2><pre><code>for (let i = 1; i <= 3; i++) {\n  for (let j = 1; j <= 3; j++) {\n    console.log(i + " x " + j + " = " + (i * j));\n  }\n}</code></pre><p class="lesson-extra">Les boucles imbriquees servent a parcourir des structures a deux niveaux. L'exemple genere une table de multiplication avec deux compteurs.</p>`, exercise: { instruction: 'Table de multiplication de <strong>3</strong> (3x1 a 3x5)', starterCode: '// Table de 3\n', validation: { type: 'output', expected: ['3 x 1 = 3', '3 x 2 = 6', '3 x 3 = 9', '3 x 4 = 12', '3 x 5 = 15'] }, hints: ['console.log(`3 x ${i} = ${3 * i}`);'], xpReward: 75 } },
        ],
    },
    {
        id: 4, slug: 'fonctions', title: 'Fonctions', subtitle: 'Declaration, arrow functions et scope',
        icon: '‚öôÔ∏è', color: '#ffd93d', requiredXP: 1200,
        lessons: [
            { id: 'js-l4-01', title: 'Declarer une fonction', theory: `<h2>Les fonctions</h2><pre><code>function saluer(prenom) {\n  console.log("Bonjour " + prenom + " !");\n}\nsaluer("Marie");</code></pre><p class="lesson-extra">Une fonction regroupe des instructions reutilisables. L'exemple montre la declaration puis l'appel de la fonction.</p>`, exercise: { instruction: 'Cree <strong>carre(n)</strong> qui affiche le carre. Appelle avec 5.', starterCode: '// Ta fonction\n\n\n// Appelle-la\n', validation: { type: 'output', expected: '25' }, hints: ['function carre(n) {', '  console.log(n * n);'], xpReward: 50 } },
            { id: 'js-l4-02', title: 'return', theory: `<h2>Le mot-cle return</h2><pre><code>function addition(a, b) {\n  return a + b;\n}\nlet resultat = addition(3, 4);</code></pre><p class="lesson-extra">return renvoie une valeur a l'endroit ou la fonction est appelee. L'exemple montre comment reutiliser ce resultat.</p>`, exercise: { instruction: 'Cree <strong>double(n)</strong> qui retourne n * 2. Affiche double(7).', starterCode: '// Ta fonction\n\n\n// Affiche\n', validation: { type: 'output', expected: '14' }, hints: ['function double(n) { return n * 2; }'], xpReward: 50 } },
            { id: 'js-l4-03', title: 'Arrow functions', theory: `<h2>Les fonctions flechees</h2><pre><code>const double = n => n * 2;\nconst saluer = (nom) => {\n  return "Salut " + nom;\n};</code></pre><p class="lesson-extra">Les arrow functions offrent une syntaxe plus courte. L'exemple montre la meme logique avec une ecriture plus simple.</p>`, exercise: { instruction: 'Cree une arrow function <strong>triple</strong> qui retourne n * 3. Affiche triple(4).', starterCode: '// Ta arrow function\n\n\n// Affiche\n', validation: { type: 'output', expected: '12' }, hints: ['const triple = n => n * 3;'], xpReward: 50 } },
            { id: 'js-l4-04', title: 'Parametres par defaut', theory: `<h2>Valeurs par defaut</h2><pre><code>function saluer(nom = "inconnu") {\n  console.log("Bonjour " + nom);\n}</code></pre><p class="lesson-extra">Les parametres par defaut evitent de passer une valeur a chaque appel. L'exemple montre ce qui se passe quand un argument manque.</p>`, exercise: { instruction: 'Cree <strong>puissance(base, exp = 2)</strong>. Affiche puissance(3) et puissance(2, 4).', starterCode: '// Ta fonction\n\n\n// Tests\n', validation: { type: 'output', expected: ['9', '16'] }, hints: ['function puissance(base, exp = 2) { return base ** exp; }'], xpReward: 50 } },
            { id: 'js-l4-05', title: 'Scope', theory: `<h2>La portee des variables</h2><pre><code>let x = "global";\nfunction test() {\n  let y = "local";\n  console.log(x); // OK\n}\n// y n'existe pas ici</code></pre><p class="lesson-extra">Le scope definit ou une variable est visible dans le code. L'exemple montre la difference entre variable locale et globale.</p>`, exercise: { instruction: 'Cree <strong>nom = "global"</strong>. Dans test(), cree <strong>nom = "local"</strong> et affiche. Apres test(), affiche nom.', starterCode: 'let nom = "global";\n\nfunction test() {\n  // Variable locale\n\n}\n\ntest();\nconsole.log(nom);\n', validation: { type: 'output', expected: ['local', 'global'] }, hints: ['let nom = "local"; dans test()'], xpReward: 75 } },
        ],
    },
    {
        id: 5, slug: 'tableaux', title: 'Tableaux', subtitle: 'Methodes et iteration',
        icon: 'üìã', color: '#c084fc', requiredXP: 1800,
        lessons: [
            { id: 'js-l5-01', title: 'Creer un tableau', theory: `<h2>Les tableaux (Arrays)</h2><pre><code>let fruits = ["pomme", "banane", "orange"];\nconsole.log(fruits[0]); // "pomme"\nconsole.log(fruits.length); // 3</code></pre><p class="lesson-extra">Un tableau (array) stocke plusieurs valeurs dans un ordre. L'exemple montre comment creer un tableau et acceder a un element par index.</p>`, exercise: { instruction: 'Cree <strong>couleurs</strong> = ["rouge", "vert", "bleu"]. Affiche le 2eme et la longueur.', starterCode: '// Ton tableau\n\n\n// Affiche\n', validation: { type: 'output', expected: ['vert', '3'] }, hints: ['console.log(couleurs[1]);', 'console.log(couleurs.length);'], xpReward: 50 } },
            { id: 'js-l5-02', title: 'push, pop, shift, unshift', theory: `<h2>Modifier un tableau</h2><pre><code>arr.push(4);     // Ajoute a la fin\narr.unshift(0);  // Ajoute au debut</code></pre><p class="lesson-extra">push, pop, shift et unshift modifient le debut ou la fin du tableau. L'exemple montre comment ajouter et retirer des elements.</p>`, exercise: { instruction: 'Cree <strong>nums = [1, 2, 3]</strong>. Ajoute 4 a la fin, 0 au debut. Affiche.', starterCode: 'let nums = [1, 2, 3];\n\n// Modifie\n\n\nconsole.log(nums.join(", "));\n', validation: { type: 'output', expected: '0, 1, 2, 3, 4' }, hints: ['nums.push(4);', 'nums.unshift(0);'], xpReward: 50 } },
            { id: 'js-l5-03', title: 'forEach et map', theory: `<h2>Iterer sur un tableau</h2><pre><code>let doubles = nums.map(n => n * 2);</code></pre><p class="lesson-extra">forEach parcourt chaque element, map cree un nouveau tableau transforme. L'exemple montre la difference entre lire et transformer.</p>`, exercise: { instruction: 'Utilise map pour creer <strong>carres</strong> de [1,2,3,4,5]. Affiche.', starterCode: 'let nums = [1, 2, 3, 4, 5];\n\n// Cree carres avec map\n\n\nconsole.log(carres.join(", "));\n', validation: { type: 'output', expected: '1, 4, 9, 16, 25' }, hints: ['let carres = nums.map(n => n * n);'], xpReward: 50 } },
            { id: 'js-l5-04', title: 'filter et find', theory: `<h2>Filtrer et chercher</h2><pre><code>let majeurs = ages.filter(a => a >= 18);\nlet premier = ages.find(a => a >= 18);</code></pre><p class="lesson-extra">filter garde les elements qui respectent une condition, find retourne le premier qui correspond. L'exemple montre comment filtrer ou trouver rapidement.</p>`, exercise: { instruction: 'Filtre [3,7,2,9,1,5,8] pour garder les nombres > 4.', starterCode: 'let nums = [3, 7, 2, 9, 1, 5, 8];\n\n// Filtre\n\n\n// Affiche\n', validation: { type: 'output', expected: '7,9,5,8' }, hints: ['let grands = nums.filter(n => n > 4);'], xpReward: 50 } },
            { id: 'js-l5-05', title: 'reduce', theory: `<h2>Reduire un tableau</h2><pre><code>let somme = nums.reduce((acc, n) => acc + n, 0);</code></pre><p class="lesson-extra">reduce combine les elements pour produire une seule valeur. L'exemple montre une accumulation pas a pas.</p>`, exercise: { instruction: 'Calcule le produit de [2, 3, 4] avec reduce.', starterCode: 'let nums = [2, 3, 4];\n\n// Produit avec reduce\n\n', validation: { type: 'output', expected: '24' }, hints: ['let produit = nums.reduce((acc, n) => acc * n, 1);'], xpReward: 75 } },
        ],
    },
    {
        id: 6, slug: 'objets', title: 'Objets', subtitle: 'Proprietes, methodes et this',
        icon: 'üì¶', color: '#ff8c42', requiredXP: 2500,
        lessons: [
            { id: 'js-l6-01', title: 'Creer un objet', theory: `<h2>Les objets</h2><pre><code>let personne = {\n  nom: "Alice",\n  age: 25\n};\nconsole.log(personne.nom);</code></pre><p class="lesson-extra">Un objet regroupe des valeurs avec des cles. L'exemple montre comment acceder a une propriete.</p>`, exercise: { instruction: 'Cree <strong>voiture</strong> avec marque: "Tesla", modele: "Model 3", annee: 2024. Affiche la marque.', starterCode: '// Ton objet\n\n\n// Affiche\n', validation: { type: 'output', expected: 'Tesla' }, hints: ['let voiture = { marque: "Tesla" };'], xpReward: 50 } },
            { id: 'js-l6-02', title: 'Methodes d\'objet', theory: `<h2>Les methodes</h2><pre><code>let personne = {\n  nom: "Alice",\n  saluer() {\n    console.log("Bonjour, je suis " + this.nom);\n  }\n};</code></pre><p class="lesson-extra">Une methode est une fonction a l'interieur d'un objet. L'exemple montre comment utiliser this pour lire les proprietes.</p>`, exercise: { instruction: 'Cree <strong>calc</strong> avec <strong>somme(a, b)</strong>. Affiche calc.somme(3, 5).', starterCode: '// Ton objet\n\n\n// Test\n', validation: { type: 'output', expected: '8' }, hints: ['let calc = { somme(a, b) { return a + b; } };'], xpReward: 50 } },
            { id: 'js-l6-03', title: 'Destructuring', theory: `<h2>Destructuring d'objets</h2><pre><code>let { nom, age } = personne;</code></pre><p class="lesson-extra">Le destructuring extrait des proprietes ou des elements en une ligne. L'exemple montre une ecriture plus courte et lisible.</p>`, exercise: { instruction: 'Destructure <strong>titre</strong> et <strong>auteur</strong> du livre. Affiche-les.', starterCode: 'let livre = { titre: "Le Petit Prince", auteur: "Saint-Exupery", pages: 96 };\n\n// Destructuring\n\n\nconsole.log(titre);\nconsole.log(auteur);\n', validation: { type: 'output', expected: ['Le Petit Prince', 'Saint-Exupery'] }, hints: ['let { titre, auteur } = livre;'], xpReward: 50 } },
            { id: 'js-l6-04', title: 'Object.keys/values/entries', theory: `<h2>Explorer un objet</h2><pre><code>console.log(Object.keys(obj));\nconsole.log(Object.values(obj));</code></pre><p class="lesson-extra">Object.keys/values/entries donnent les cles, valeurs et paires d'un objet. L'exemple montre comment les parcourir facilement.</p>`, exercise: { instruction: 'Affiche les cles de { a: 1, b: 2, c: 3 }', starterCode: 'let obj = { a: 1, b: 2, c: 3 };\n\n// Affiche les cles\n', validation: { type: 'output', expected: 'a,b,c' }, hints: ['console.log(Object.keys(obj).join(","));'], xpReward: 50 } },
        ],
    },
    {
        id: 7, slug: 'dom', title: 'DOM Manipulation', subtitle: 'Selecteurs, events et modifications',
        icon: 'üåê', color: '#06d6a0', requiredXP: 3300,
        lessons: [
            { id: 'js-l7-01', title: 'Selectionner des elements', theory: `<h2>Le DOM</h2><pre><code>let el = document.querySelector(".classe");\nlet els = document.querySelectorAll(".classe");</code></pre><p class="lesson-extra">querySelector et querySelectorAll servent a choisir des elements du DOM. L'exemple montre comment cibler un element par sa classe.</p>`, exercise: { instruction: 'Affiche "querySelector" et "querySelectorAll"', starterCode: '// Affiche les deux methodes\n', validation: { type: 'output', expected: ['querySelector', 'querySelectorAll'] }, hints: ['console.log("querySelector");'], xpReward: 50 } },
            { id: 'js-l7-02', title: 'Modifier le contenu', theory: `<h2>Modifier des elements</h2><pre><code>el.textContent = "Nouveau";\nel.style.color = "red";\nel.classList.add("active");</code></pre><p class="lesson-extra">Tu peux modifier le contenu d'un element avec textContent ou innerHTML. L'exemple montre comment changer ce qui s'affiche a l'ecran.</p>`, exercise: { instruction: 'Simule : cree <strong>element</strong> avec textContent="" et style={}. Change textContent en "Hello DOM" et style.color en "blue". Affiche les deux.', starterCode: 'let element = { textContent: "", style: {} };\n\n// Modifie\n\n\nconsole.log(element.textContent);\nconsole.log(element.style.color);\n', validation: { type: 'output', expected: ['Hello DOM', 'blue'] }, hints: ['element.textContent = "Hello DOM";'], xpReward: 50 } },
            { id: 'js-l7-03', title: 'Les evenements', theory: `<h2>Ecouter des evenements</h2><pre><code>btn.addEventListener("click", () => {\n  console.log("Clique !");\n});</code></pre><p class="lesson-extra">Les evenements declenchent du code quand l'utilisateur agit. L'exemple montre un clic qui lance une action.</p>`, exercise: { instruction: 'Cree <strong>bouton</strong> avec addEventListener(event, fn) qui appelle fn. Teste avec "click" -> "Clique !"', starterCode: 'let bouton = {\n  addEventListener(event, fn) {\n    fn();\n  }\n};\n\n// Ajoute un listener\n', validation: { type: 'output', expected: 'Clique !' }, hints: ['bouton.addEventListener("click", () => console.log("Clique !"));'], xpReward: 50 } },
            { id: 'js-l7-04', title: 'Creer des elements', theory: `<h2>Creer des elements dynamiquement</h2><pre><code>let p = document.createElement("p");\np.textContent = "Nouveau";\ndocument.body.appendChild(p);</code></pre><p class="lesson-extra">Tu peux creer des elements dynamiquement avec createElement et appendChild. L'exemple montre comment ajouter un element dans la page.</p>`, exercise: { instruction: 'Simule createElement : cree un objet avec tagName, textContent et classList (tableau). Affiche tagName et textContent.', starterCode: 'function createElement(tag) {\n  return { tagName: tag, textContent: "", classList: [] };\n}\n\nlet div = createElement("div");\ndiv.textContent = "Mon element";\ndiv.classList.push("active");\n\nconsole.log(div.tagName);\nconsole.log(div.textContent);\n', validation: { type: 'output', expected: ['div', 'Mon element'] }, hints: ['Le code est deja la !'], xpReward: 50 } },
        ],
    },
    {
        id: 8, slug: 'async', title: 'JavaScript Asynchrone', subtitle: 'Callbacks, Promises et async/await',
        icon: '‚è≥', color: '#ef476f', requiredXP: 4200,
        lessons: [
            { id: 'js-l8-01', title: 'Callbacks', theory: `<h2>Les callbacks</h2><pre><code>function traiter(valeur, callback) {\n  callback(valeur * 2);\n}</code></pre><p class="lesson-extra">Un callback est une fonction passee a une autre fonction. L'exemple montre comment executer du code une fois une action terminee.</p>`, exercise: { instruction: 'Cree <strong>calculer(a, b, operation)</strong>. Appelle avec 10, 3 et (a, b) => a + b.', starterCode: 'function calculer(a, b, operation) {\n  console.log(operation(a, b));\n}\n\n// Appelle\n', validation: { type: 'output', expected: '13' }, hints: ['calculer(10, 3, (a, b) => a + b);'], xpReward: 50 } },
            { id: 'js-l8-02', title: 'Promises', theory: `<h2>Les Promesses</h2><pre><code>let p = new Promise((resolve, reject) => {\n  resolve("OK !");\n});\np.then(msg => console.log(msg));</code></pre><p class="lesson-extra">Une Promise represente un resultat futur (succes ou echec). L'exemple montre l'utilisation de then et catch.</p>`, exercise: { instruction: 'Cree une Promise qui resolve "Promesse tenue !" et affiche avec .then()', starterCode: '// Ta promise\n\n', validation: { type: 'output', expected: 'Promesse tenue !' }, hints: ['let p = new Promise((resolve) => resolve("Promesse tenue !"));'], xpReward: 50 } },
            { id: 'js-l8-03', title: 'async / await', theory: `<h2>async/await</h2><pre><code>async function saluer() {\n  let msg = await new Promise(resolve => resolve("Bonjour !"));\n  console.log(msg);\n}\nsaluer();</code></pre><p class="lesson-extra">async/await rend le code asynchrone plus lisible. L'exemple montre comment attendre un resultat sans encha√Æner de then.</p>`, exercise: { instruction: 'Cree <strong>async getMessage()</strong> qui await une Promise resolvant "Async fonctionne !". Affiche.', starterCode: '// Ta fonction async\n\n', validation: { type: 'output', expected: 'Async fonctionne !' }, hints: ['async function getMessage() {', '  let msg = await new Promise(r => r("Async fonctionne !"));'], xpReward: 75 } },
        ],
    },
    {
        id: 9, slug: 'es6', title: 'ES6+ Features', subtitle: 'Destructuring, spread, modules',
        icon: '‚ú®', color: '#118ab2', requiredXP: 5200,
        lessons: [
            { id: 'js-l9-01', title: 'Spread et Rest', theory: `<h2>L'operateur spread (...)</h2><pre><code>let arr2 = [...arr1, 4, 5];\nfunction somme(...nums) { return nums.reduce((a,b) => a+b, 0); }</code></pre><p class="lesson-extra">Le spread copie ou fusionne des tableaux/objets, le rest collecte des valeurs. L'exemple montre comment passer et regrouper des arguments.</p>`, exercise: { instruction: 'Fusionne [1, 2] et [3, 4] avec spread. Affiche.', starterCode: 'let a = [1, 2];\nlet b = [3, 4];\n\n// Fusionne\n\n', validation: { type: 'output', expected: '1,2,3,4' }, hints: ['let c = [...a, ...b];'], xpReward: 50 } },
            { id: 'js-l9-02', title: 'Template literals avances', theory: `<h2>Template literals avances</h2><pre><code>console.log(\`\${items.length} items\`);\nconsole.log(\`5 + 3 = \${5 + 3}\`);</code></pre><p class="lesson-extra">Les template literals avances permettent du multiline et des expressions. L'exemple montre comment formater un texte proprement.</p>`, exercise: { instruction: 'Tableau de 5 nombres. Affiche "Tableau de X elements, somme = Y".', starterCode: 'let nums = [10, 20, 30, 40, 50];\n\n// Template literal\n', validation: { type: 'output', expected: 'Tableau de 5 elements, somme = 150' }, hints: ['let somme = nums.reduce((a, b) => a + b, 0);'], xpReward: 50 } },
            { id: 'js-l9-03', title: 'Map et Set', theory: `<h2>Map et Set</h2><pre><code>let set = new Set([1, 2, 2, 3, 3]);\nconsole.log(set.size); // 3</code></pre><p class="lesson-extra">Map et Set sont des collections utiles pour stocker des paires ou des valeurs uniques. L'exemple montre comment ajouter et lire des elements.</p>`, exercise: { instruction: 'Cree un Set de [1,2,2,3,3,4,4,5]. Affiche taille et elements.', starterCode: '// Ton Set\n\n', validation: { type: 'output', expected: ['5', '1,2,3,4,5'] }, hints: ['let s = new Set([1, 2, 2, 3, 3, 4, 4, 5]);'], xpReward: 50 } },
            { id: 'js-l9-04', title: 'Optional chaining et ??', theory: `<h2>?. et ??</h2><pre><code>console.log(user.profil?.nom);\nconsole.log(nom ?? "Anonyme");</code></pre><p class="lesson-extra">Optional chaining evite les erreurs quand une propriete manque, et ?? fournit une valeur par defaut. L'exemple montre un acces securise.</p>`, exercise: { instruction: 'Cree <strong>config = { theme: null }</strong>. Affiche config.theme ou "sombre".', starterCode: 'let config = { theme: null };\n\n// Affiche avec valeur par defaut\n', validation: { type: 'output', expected: 'sombre' }, hints: ['console.log(config.theme ?? "sombre");'], xpReward: 50 } },
        ],
    },
    {
        id: 10, slug: 'projets', title: 'Projets Pratiques', subtitle: 'Mini-projets pour tout combiner',
        icon: 'üöÄ', color: '#ffd166', requiredXP: 6300,
        lessons: [
            { id: 'js-l10-01', title: 'Projet : Calculatrice', theory: `<h2>Mini-projet : Calculatrice</h2><p>Combine tes connaissances pour creer une calculatrice en objet !</p><p class="lesson-extra">Ce projet assemble les notions de base (variables, calculs, fonctions). L'objectif est de construire une mini calculatrice fonctionnelle.</p>`, exercise: { instruction: 'Cree <strong>calc</strong> avec add, sub, mul, div. Affiche add(10,5), mul(3,4), div(20,4).', starterCode: '// Ton objet calculatrice\n\n\n// Tests\n', validation: { type: 'output', expected: ['15', '12', '5'] }, hints: ['let calc = { add(a,b) { return a+b; } };'], xpReward: 75 } },
            { id: 'js-l10-02', title: 'Projet : Todo List', theory: `<h2>Mini-projet : Todo List</h2><p>Cree un gestionnaire de taches avec des fonctions.</p><p class="lesson-extra">Ce projet combine tableaux, objets et DOM pour gerer une liste. Tu vas creer, afficher et supprimer des taches.</p>`, exercise: { instruction: 'Cree <strong>todos</strong>, <strong>addTodo</strong>, <strong>completeTodo</strong>. Ajoute "Apprendre JS" et "Pratiquer", complete la 1ere, affiche.', starterCode: 'let todos = [];\n\nfunction addTodo(texte) {\n  // Ajoute { texte, fait: false }\n}\n\nfunction completeTodo(index) {\n  // Marque comme fait\n}\n\nfunction afficherTodos() {\n  todos.forEach(t => console.log(`${t.fait ? "[x]" : "[ ]"} ${t.texte}`));\n}\n\n// Utilise\n', validation: { type: 'output', expected: ['[x] Apprendre JS', '[ ] Pratiquer'] }, hints: ['addTodo: todos.push({ texte, fait: false });'], xpReward: 100 } },
            { id: 'js-l10-03', title: 'Projet : Filtre de donnees', theory: `<h2>Mini-projet : Filtrer des donnees</h2><p>Utilise map, filter et reduce !</p><p class="lesson-extra">Ce projet te fait filtrer et afficher des donnees. L'objectif est de transformer une liste selon des criteres.</p>`, exercise: { instruction: 'Affiche les noms des etudiants avec note >= 12, separes par ", ".', starterCode: 'let etudiants = [\n  { nom: "Alice", note: 16 },\n  { nom: "Bob", note: 8 },\n  { nom: "Charlie", note: 14 },\n  { nom: "Diana", note: 11 },\n  { nom: "Eve", note: 19 }\n];\n\n// Filtre et affiche\n', validation: { type: 'output', expected: 'Alice, Charlie, Eve' }, hints: ['let reussis = etudiants.filter(e => e.note >= 12).map(e => e.nom);'], xpReward: 100 } },
        ],
    },
];

const pythonCurriculum = [
    {
        id: 1, slug: 'les-bases', title: 'Les Bases', subtitle: 'print(), variables et types',
        icon: 'üü¢', color: '#4ec9b0', requiredXP: 0,
        lessons: [
            { id: 'py-l1-01', title: 'Ton premier programme', theory: `<h2>Bienvenue dans Python !</h2><p>Python est un langage <strong>simple et puissant</strong>. Utilise partout : web, data science, IA...</p><p>La premiere fonction : <code>print()</code></p><pre><code>print("Bonjour le monde !")</code></pre><p>Pas besoin de <code>;</code> en Python !</p><p class="lesson-extra">Tu affiches un message avec print, c'est la sortie de base en Python. L'exemple montre que le texte est imprime tel quel.</p>`, exercise: { instruction: 'Utilise <strong>print()</strong> pour afficher <strong>"Salut Python !"</strong>', starterCode: '# Ecris ton code ici\n', validation: { type: 'output', expected: 'Salut Python !' }, hints: ['print("Salut Python !")'], xpReward: 50 } },
            { id: 'py-l1-02', title: 'Les variables', theory: `<h2>Les variables</h2><pre><code>prenom = "Marie"\nage = 25\nprint(prenom)  # Affiche: Marie</code></pre><p>Python devine le type automatiquement (typage dynamique).</p><p class="lesson-extra">Une variable stocke une valeur que tu peux reutiliser. L'exemple montre une affectation puis l'affichage de la valeur.</p>`, exercise: { instruction: 'Cree <strong>langage = "Python"</strong> et affiche-la', starterCode: '# Cree ta variable\n\n# Affiche-la\n', validation: { type: 'output', expected: 'Python' }, hints: ['langage = "Python"', 'print(langage)'], xpReward: 50 } },
            { id: 'py-l1-03', title: 'Les types de donnees', theory: `<h2>Les types en Python</h2><pre><code># str, int, float, bool\nnom = "Alice"\nage = 25\nprix = 9.99\nactif = True\nprint(type(42))  # <class 'int'></code></pre><p class="lesson-extra">Les types de donnees indiquent la nature d'une valeur (texte, nombre, booleen). L'exemple montre comment Python les manipule.</p>`, exercise: { instruction: 'Cree <strong>age = 25</strong> et <strong>nom = "Python"</strong>. Affiche le type de chacun.', starterCode: '# Tes variables\n\n\n# Affiche leur type\n', validation: { type: 'output', expected: ["<class 'int'>", "<class 'str'>"] }, hints: ['print(type(age))', 'print(type(nom))'], xpReward: 50 } },
            { id: 'py-l1-04', title: 'f-strings', theory: `<h2>Les f-strings</h2><pre><code>age = 20\nprint(f"J'ai {age} ans")</code></pre><p>Le <code>f</code> avant les guillemets permet d'inserer des variables.</p><p class="lesson-extra">Les f-strings permettent d'inserer des variables dans une phrase. L'exemple montre comment formater une sortie proprement.</p>`, exercise: { instruction: 'Cree <strong>prenom = "Aldo"</strong> et <strong>age = 20</strong>. Affiche "Je m\'appelle Aldo et j\'ai 20 ans"', starterCode: 'prenom = "Aldo"\nage = 20\n\n# Utilise une f-string\n', validation: { type: 'output', expected: "Je m'appelle Aldo et j'ai 20 ans" }, hints: ['print(f"Je m\'appelle {prenom} et j\'ai {age} ans")'], xpReward: 50 } },
            { id: 'py-l1-05', title: 'Operations mathematiques', theory: `<h2>Les operateurs</h2><pre><code>print(10 + 3)   # 13\nprint(10 // 3)  # 3 (division entiere)\nprint(10 % 3)   # 1\nprint(2 ** 3)   # 8</code></pre><p class="lesson-extra">Les operateurs + - * / % ** permettent de calculer. L'exemple montre aussi la priorite des operations.</p>`, exercise: { instruction: 'Calcule et affiche <strong>(15 + 5) * 2</strong>', starterCode: '# Calcule et affiche\n', validation: { type: 'output', expected: '40' }, hints: ['print((15 + 5) * 2)'], xpReward: 50 } },
            { id: 'py-l1-06', title: 'Conversion de types', theory: `<h2>Convertir les types</h2><pre><code>nombre = int("42")\ntexte = str(42)\ndecimal = float("3.14")</code></pre><p class="lesson-extra">La conversion de types transforme une valeur en int, str ou float. L'exemple montre comment convertir puis calculer.</p>`, exercise: { instruction: 'Convertis <strong>"123"</strong> en int, ajoute 7, affiche.', starterCode: 'texte = "123"\n\n# Convertis et calcule\n', validation: { type: 'output', expected: '130' }, hints: ['nombre = int(texte)', 'print(nombre + 7)'], xpReward: 50 } },
            { id: 'py-l1-07', title: 'Recapitulatif Niveau 1', theory: `<h2>Recapitulatif</h2><ul><li><code>print()</code></li><li>Variables (typage dynamique)</li><li>Types : str, int, float, bool</li><li>f-strings, operateurs, conversion</li></ul><p class="lesson-extra">Cette lecon resume les bases du niveau 1. L'exercice final combine plusieurs notions pour verifier que tu les maitrises.</p>`, exercise: { instruction: 'Cree <strong>a = 8</strong> et <strong>b = 3</strong>. Affiche somme, produit et type du produit.', starterCode: 'a = 8\nb = 3\n\n# Affiche la somme\n\n# Affiche le produit\n\n# Affiche le type du produit\n', validation: { type: 'output', expected: ['11', '24', "<class 'int'>"] }, hints: ['print(a + b)', 'print(a * b)', 'print(type(a * b))'], xpReward: 75 } },
        ],
    },
    {
        id: 2, slug: 'conditions', title: 'Conditions', subtitle: 'if, elif, else et comparaisons',
        icon: 'üîÄ', color: '#61dafb', requiredXP: 300,
        lessons: [
            { id: 'py-l2-01', title: 'Comparaisons', theory: `<h2>Les operateurs de comparaison</h2><pre><code>print(5 == 5)   # True\nprint(5 != 3)   # True\nprint(5 > 3)    # True</code></pre><p class="lesson-extra">Les comparaisons renvoient True ou False. L'exemple montre comment comparer des valeurs et interpreter le resultat.</p>`, exercise: { instruction: 'Affiche : <strong>10 > 5</strong>, <strong>"hello" == "hello"</strong>, <strong>3 != 3</strong>', starterCode: '# Affiche les 3 comparaisons\n', validation: { type: 'output', expected: ['True', 'True', 'False'] }, hints: ['print(10 > 5)'], xpReward: 50 } },
            { id: 'py-l2-02', title: 'if / elif / else', theory: `<h2>Les conditions</h2><pre><code>age = 18\nif age >= 18:\n    print("Majeur")\nelif age >= 13:\n    print("Ado")\nelse:\n    print("Enfant")</code></pre><p>N'oublie pas les <code>:</code> et l'indentation (4 espaces) !</p><p class="lesson-extra">if/elif/else choisit un bloc selon une condition. L'exemple illustre l'indentation et les deux points.</p>`, exercise: { instruction: '<strong>temperature = 30</strong>. Si >= 30, affiche "Il fait chaud !", sinon "Il fait bon."', starterCode: 'temperature = 30\n\n# Ta condition\n', validation: { type: 'output', expected: 'Il fait chaud !' }, hints: ['if temperature >= 30:', '    print("Il fait chaud !")'], xpReward: 50 } },
            { id: 'py-l2-03', title: 'Operateurs logiques', theory: `<h2>and, or, not</h2><pre><code>if age >= 18 and permis:\n    print("Tu peux conduire !")\nprint(not True)  # False</code></pre><p class="lesson-extra">Les operateurs logiques and/or/not combinent des conditions. L'exemple montre comment tester plusieurs criteres.</p>`, exercise: { instruction: 'Cree <strong>age = 25</strong> et <strong>etudiant = True</strong>. Si age < 30 et etudiant, affiche "Reduction etudiant !"', starterCode: 'age = 25\netudiant = True\n\n# Ta condition\n', validation: { type: 'output', expected: 'Reduction etudiant !' }, hints: ['if age < 30 and etudiant:'], xpReward: 50 } },
            { id: 'py-l2-04', title: 'Expression ternaire', theory: `<h2>Le ternaire Python</h2><pre><code>statut = "majeur" if age >= 18 else "mineur"</code></pre><p class="lesson-extra">Le ternaire permet d'ecrire un if/else en une ligne. L'exemple montre comment choisir une valeur rapidement.</p>`, exercise: { instruction: 'Si <strong>score = 75</strong> >= 50, affiche "Reussi", sinon "Echec" (ternaire)', starterCode: 'score = 75\n\n# Expression ternaire\n', validation: { type: 'output', expected: 'Reussi' }, hints: ['resultat = "Reussi" if score >= 50 else "Echec"'], xpReward: 50 } },
            { id: 'py-l2-05', title: 'in et membership', theory: `<h2>L'operateur in</h2><pre><code>print("on" in "Python")  # True\nfruits = ["pomme", "banane"]\nprint("banane" in fruits)  # True</code></pre><p class="lesson-extra">in verifie l'appartenance a une chaine ou une liste. L'exemple montre comment tester si un element est present.</p>`, exercise: { instruction: 'Verifie si "thon" est dans "Python", affiche le resultat', starterCode: '# Verifie avec in\n', validation: { type: 'output', expected: 'True' }, hints: ['print("thon" in "Python")'], xpReward: 50 } },
        ],
    },
    {
        id: 3, slug: 'boucles', title: 'Boucles', subtitle: 'for, while et range()',
        icon: 'üîÑ', color: '#ff6b9d', requiredXP: 700,
        lessons: [
            { id: 'py-l3-01', title: 'La boucle for', theory: `<h2>La boucle for</h2><pre><code>for i in range(5):\n    print(i)\n# 0, 1, 2, 3, 4\n\nfor i in range(1, 6):\n    print(i)\n# 1, 2, 3, 4, 5</code></pre><p class="lesson-extra">La boucle for repete un bloc pour chaque valeur de range. L'exemple montre comment parcourir une suite d'entiers.</p>`, exercise: { instruction: 'Affiche les nombres de <strong>1 a 5</strong> avec for', starterCode: '# Ta boucle for\n', validation: { type: 'output', expected: ['1', '2', '3', '4', '5'] }, hints: ['for i in range(1, 6):', '    print(i)'], xpReward: 50 } },
            { id: 'py-l3-02', title: 'La boucle while', theory: `<h2>La boucle while</h2><pre><code>compteur = 0\nwhile compteur < 3:\n    print(compteur)\n    compteur += 1</code></pre><p class="lesson-extra">La boucle while repete tant qu'une condition est vraie. L'exemple montre un compteur qui change a chaque tour.</p>`, exercise: { instruction: 'Affiche les nombres de <strong>10 a 6</strong> (decroissant)', starterCode: 'n = 10\n\n# Ta boucle while\n', validation: { type: 'output', expected: ['10', '9', '8', '7', '6'] }, hints: ['while n >= 6:', '    print(n)', '    n -= 1'], xpReward: 50 } },
            { id: 'py-l3-03', title: 'break et continue', theory: `<h2>Controler les boucles</h2><pre><code>for i in range(10):\n    if i == 5:\n        break  # arrete\n    if i == 2:\n        continue  # saute</code></pre><p class="lesson-extra">break arrete la boucle et continue saute une iteration. L'exemple montre comment controler l'execution.</p>`, exercise: { instruction: 'Affiche 1 a 10, mais <strong>saute le 5</strong>', starterCode: '# Boucle de 1 a 10, saute 5\n', validation: { type: 'output', expected: ['1', '2', '3', '4', '6', '7', '8', '9', '10'] }, hints: ['if i == 5:', '    continue'], xpReward: 50 } },
            { id: 'py-l3-04', title: 'enumerate et zip', theory: `<h2>enumerate() et zip()</h2><pre><code>for i, fruit in enumerate(fruits):\n    print(f"{i}: {fruit}")</code></pre><p class="lesson-extra">enumerate donne l'index et la valeur, zip combine deux listes. L'exemple montre comment parcourir avec un index propre.</p>`, exercise: { instruction: 'Utilise enumerate pour afficher "0: rouge", "1: vert", "2: bleu"', starterCode: 'couleurs = ["rouge", "vert", "bleu"]\n\n# Utilise enumerate\n', validation: { type: 'output', expected: ['0: rouge', '1: vert', '2: bleu'] }, hints: ['for i, c in enumerate(couleurs):', '    print(f"{i}: {c}")'], xpReward: 75 } },
        ],
    },
    {
        id: 4, slug: 'fonctions', title: 'Fonctions', subtitle: 'def, return, args et lambda',
        icon: '‚öôÔ∏è', color: '#ffd43b', requiredXP: 1200,
        lessons: [
            { id: 'py-l4-01', title: 'Definir une fonction', theory: `<h2>Les fonctions avec def</h2><pre><code>def saluer(prenom):\n    print(f"Bonjour {prenom} !")\n\nsaluer("Marie")</code></pre><p class="lesson-extra">Une fonction regroupe des instructions reutilisables. L'exemple montre comment definir puis appeler une fonction.</p>`, exercise: { instruction: 'Cree <strong>carre(n)</strong> qui affiche le carre. Appelle avec 5.', starterCode: '# Ta fonction\n\n\n# Appelle-la\n', validation: { type: 'output', expected: '25' }, hints: ['def carre(n):', '    print(n * n)'], xpReward: 50 } },
            { id: 'py-l4-02', title: 'return', theory: `<h2>Retourner une valeur</h2><pre><code>def addition(a, b):\n    return a + b\nresultat = addition(3, 4)</code></pre><p class="lesson-extra">return renvoie une valeur exploitable ailleurs. L'exemple montre comment stocker et reutiliser ce resultat.</p>`, exercise: { instruction: 'Cree <strong>double(n)</strong> retournant n * 2. Affiche double(7).', starterCode: '# Ta fonction\n\n\n# Affiche\n', validation: { type: 'output', expected: '14' }, hints: ['def double(n): return n * 2'], xpReward: 50 } },
            { id: 'py-l4-03', title: 'Parametres par defaut et *args', theory: `<h2>Valeurs par defaut et *args</h2><pre><code>def saluer(nom="inconnu"):\n    print(f"Bonjour {nom}")\n\ndef somme(*args):\n    return sum(args)</code></pre><p class="lesson-extra">Les parametres par defaut evitent de tout fournir a chaque appel. *args permet de passer un nombre variable d'arguments.</p>`, exercise: { instruction: 'Cree <strong>puissance(base, exp=2)</strong>. Affiche puissance(3) et puissance(2, 4).', starterCode: '# Ta fonction\n\n\n# Tests\n', validation: { type: 'output', expected: ['9', '16'] }, hints: ['def puissance(base, exp=2): return base ** exp'], xpReward: 50 } },
            { id: 'py-l4-04', title: 'Lambda', theory: `<h2>Les fonctions lambda</h2><pre><code>double = lambda n: n * 2\nprint(double(5))  # 10</code></pre><p class="lesson-extra">Une lambda est une fonction courte sur une ligne. L'exemple montre comment definir un calcul simple rapidement.</p>`, exercise: { instruction: 'Cree lambda <strong>triple</strong> retournant n * 3. Affiche triple(4).', starterCode: '# Ta lambda\n\n\n# Affiche\n', validation: { type: 'output', expected: '12' }, hints: ['triple = lambda n: n * 3'], xpReward: 50 } },
            { id: 'py-l4-05', title: 'Scope', theory: `<h2>La portee des variables</h2><pre><code>x = "global"\ndef test():\n    y = "local"\n    print(x)  # OK\ntest()\n# y n'existe pas ici</code></pre><p class="lesson-extra">Le scope definit ou une variable est visible. L'exemple montre la difference entre variable locale et globale.</p>`, exercise: { instruction: 'Cree <strong>nom = "global"</strong>. Dans test(), cree <strong>nom = "local"</strong> et affiche. Apres test(), affiche nom.', starterCode: 'nom = "global"\n\ndef test():\n    # Variable locale\n    pass\n\ntest()\nprint(nom)\n', validation: { type: 'output', expected: ['local', 'global'] }, hints: ['Dans test(): nom = "local" puis print(nom)'], xpReward: 75 } },
        ],
    },
    {
        id: 5, slug: 'listes', title: 'Listes', subtitle: 'Methodes, slicing et comprehension',
        icon: 'üìã', color: '#b48ead', requiredXP: 1800,
        lessons: [
            { id: 'py-l5-01', title: 'Creer et acceder', theory: `<h2>Les listes</h2><pre><code>fruits = ["pomme", "banane", "orange"]\nprint(fruits[0])   # pomme\nprint(fruits[-1])  # orange</code></pre><p class="lesson-extra">Une liste est une collection ordonnee d'elements. L'exemple montre l'index 0 pour le premier element et -1 pour le dernier.</p>`, exercise: { instruction: 'Cree <strong>couleurs = ["rouge", "vert", "bleu"]</strong>. Affiche le 2eme et la longueur.', starterCode: '# Ta liste\n\n\n# Affiche\n', validation: { type: 'output', expected: ['vert', '3'] }, hints: ['print(couleurs[1])', 'print(len(couleurs))'], xpReward: 50 } },
            { id: 'py-l5-02', title: 'Modifier une liste', theory: `<h2>Methodes de liste</h2><pre><code>arr.append(4)     # Ajoute a la fin\narr.insert(0, 0)  # Insere au debut\narr.pop()         # Retire le dernier</code></pre><p class="lesson-extra">Les methodes append, insert et pop modifient une liste. L'exemple montre comment ajouter et retirer des elements.</p>`, exercise: { instruction: 'Cree <strong>nums = [1,2,3]</strong>. Ajoute 4, insere 0 au debut. Affiche.', starterCode: 'nums = [1, 2, 3]\n\n# Modifie\n\n\n# Affiche\n', validation: { type: 'output', expected: '[0, 1, 2, 3, 4]' }, hints: ['nums.append(4)', 'nums.insert(0, 0)'], xpReward: 50 } },
            { id: 'py-l5-03', title: 'Slicing', theory: `<h2>Le slicing</h2><pre><code>lettres[1:3]   # ["b", "c"]\nlettres[::-1]  # inverse</code></pre><p class="lesson-extra">Le slicing extrait une portion de liste avec des index. L'exemple montre comment prendre les elements voulus rapidement.</p>`, exercise: { instruction: 'Cree <strong>nums = [10,20,30,40,50]</strong>. Affiche les 3 premiers avec slicing.', starterCode: 'nums = [10, 20, 30, 40, 50]\n\n# Slicing\n', validation: { type: 'output', expected: '[10, 20, 30]' }, hints: ['print(nums[:3])'], xpReward: 50 } },
            { id: 'py-l5-04', title: 'List comprehension', theory: `<h2>List comprehension</h2><pre><code>carres = [i ** 2 for i in range(5)]\npairs = [i for i in range(10) if i % 2 == 0]</code></pre><p class="lesson-extra">La list comprehension cree une nouvelle liste en une ligne. L'exemple montre comment generer et filtrer des valeurs.</p>`, exercise: { instruction: 'Carres des nombres de 1 a 5. Affiche.', starterCode: '# List comprehension\n\n', validation: { type: 'output', expected: '[1, 4, 9, 16, 25]' }, hints: ['carres = [i ** 2 for i in range(1, 6)]'], xpReward: 75 } },
        ],
    },
    {
        id: 6, slug: 'dictionnaires', title: 'Dictionnaires', subtitle: 'Cles, valeurs et methodes',
        icon: 'üì¶', color: '#ff9f43', requiredXP: 2500,
        lessons: [
            { id: 'py-l6-01', title: 'Creer un dictionnaire', theory: `<h2>Les dictionnaires</h2><pre><code>personne = {"nom": "Alice", "age": 25}\nprint(personne["nom"])        # Alice\nprint(personne.get("tel", "N/A"))  # N/A</code></pre><p class="lesson-extra">Un dictionnaire stocke des paires cle/valeur. L'exemple montre comment acceder a une valeur par sa cle.</p>`, exercise: { instruction: 'Cree <strong>voiture</strong> avec marque: "Tesla", modele: "Model 3", annee: 2024. Affiche la marque.', starterCode: '# Ton dictionnaire\n\n\n# Affiche la marque\n', validation: { type: 'output', expected: 'Tesla' }, hints: ['voiture = {"marque": "Tesla"}'], xpReward: 50 } },
            { id: 'py-l6-02', title: 'Modifier un dict', theory: `<h2>Modifier et parcourir</h2><pre><code>d["c"] = 3  # Ajouter\nfor cle, valeur in d.items():\n    print(f"{cle} = {valeur}")</code></pre><p class="lesson-extra">Tu peux ajouter des cles et parcourir un dictionnaire. L'exemple montre comment lire les paires cle/valeur.</p>`, exercise: { instruction: 'Cree <strong>scores = {"Alice": 90, "Bob": 85}</strong>. Ajoute "Charlie": 95. Affiche toutes les paires.', starterCode: 'scores = {"Alice": 90, "Bob": 85}\n\n# Ajoute Charlie\n\n\n# Affiche tout\n', validation: { type: 'output', expected: ['Alice = 90', 'Bob = 85', 'Charlie = 95'] }, hints: ['scores["Charlie"] = 95'], xpReward: 50 } },
            { id: 'py-l6-03', title: 'keys(), values(), items()', theory: `<h2>Methodes de dictionnaire</h2><pre><code>print(list(d.keys()))\nprint("a" in d)  # True</code></pre><p class="lesson-extra">keys(), values() et items() donnent les cles, valeurs et paires. L'exemple montre comment les utiliser.</p>`, exercise: { instruction: 'Affiche les cles de {"x": 1, "y": 2, "z": 3} sous forme de liste', starterCode: 'd = {"x": 1, "y": 2, "z": 3}\n\n# Affiche les cles\n', validation: { type: 'output', expected: "['x', 'y', 'z']" }, hints: ['print(list(d.keys()))'], xpReward: 50 } },
            { id: 'py-l6-04', title: 'Dict comprehension', theory: `<h2>Dict comprehension</h2><pre><code>carres = {i: i**2 for i in range(1, 6)}</code></pre><p class="lesson-extra">La dict comprehension cree un dictionnaire en une ligne. L'exemple montre comment generer des paires automatiquement.</p>`, exercise: { instruction: 'Cree {1:1, 2:4, 3:9, 4:16, 5:25}. Affiche.', starterCode: '# Dict comprehension\n\n', validation: { type: 'output', expected: '{1: 1, 2: 4, 3: 9, 4: 16, 5: 25}' }, hints: ['carres = {i: i**2 for i in range(1, 6)}'], xpReward: 75 } },
        ],
    },
    {
        id: 7, slug: 'strings', title: 'Strings Avancees', subtitle: 'Methodes et formatage',
        icon: 'üî§', color: '#06d6a0', requiredXP: 3300,
        lessons: [
            { id: 'py-l7-01', title: 'Methodes de string', theory: `<h2>Les methodes de string</h2><pre><code>texte.strip()\ntexte.lower()\ntexte.upper()\ntexte.replace("a", "b")</code></pre><p class="lesson-extra">Les methodes de string transforment ou nettoient du texte. L'exemple montre comment modifier une chaine facilement.</p>`, exercise: { instruction: 'Transforme <strong>"bonjour python"</strong> en majuscules. Affiche.', starterCode: 'texte = "bonjour python"\n\n# Transforme et affiche\n', validation: { type: 'output', expected: 'BONJOUR PYTHON' }, hints: ['print(texte.upper())'], xpReward: 50 } },
            { id: 'py-l7-02', title: 'split() et join()', theory: `<h2>Decouper et assembler</h2><pre><code>mots = phrase.split(" ")\nresultat = ", ".join(fruits)</code></pre><p class="lesson-extra">split decoupe une chaine, join assemble une liste en texte. L'exemple montre comment passer d'un format a l'autre.</p>`, exercise: { instruction: 'Decoupe <strong>"rouge-vert-bleu"</strong> par "-". Affiche la liste.', starterCode: 'couleurs = "rouge-vert-bleu"\n\n# Decoupe et affiche\n', validation: { type: 'output', expected: "['rouge', 'vert', 'bleu']" }, hints: ['print(couleurs.split("-"))'], xpReward: 50 } },
            { id: 'py-l7-03', title: 'Slicing de strings', theory: `<h2>Slicing sur les strings</h2><pre><code>texte = "Python"\nprint(texte[::-1])  # nohtyP</code></pre><p class="lesson-extra">Le slicing fonctionne aussi sur les strings. L'exemple montre comment inverser une chaine avec un pas negatif.</p>`, exercise: { instruction: 'Inverse la string <strong>"Python"</strong> avec slicing.', starterCode: 'texte = "Python"\n\n# Inverse avec slicing\n', validation: { type: 'output', expected: 'nohtyP' }, hints: ['print(texte[::-1])'], xpReward: 50 } },
        ],
    },
    {
        id: 8, slug: 'exceptions', title: 'Exceptions', subtitle: 'try/except et gestion d\'erreurs',
        icon: 'üõ°Ô∏è', color: '#ef476f', requiredXP: 4200,
        lessons: [
            { id: 'py-l8-01', title: 'try / except', theory: `<h2>Gerer les erreurs</h2><pre><code>try:\n    nombre = int("abc")\nexcept ValueError:\n    print("Pas un nombre !")</code></pre><p class="lesson-extra">try/except intercepte les erreurs sans bloquer le programme. L'exemple montre comment afficher un message d'erreur propre.</p>`, exercise: { instruction: 'Entoure <strong>int("hello")</strong> d\'un try/except. Si ValueError, affiche "Erreur de conversion".', starterCode: '# Gere l\'erreur\n', validation: { type: 'output', expected: 'Erreur de conversion' }, hints: ['try:', '    int("hello")', 'except ValueError:'], xpReward: 50 } },
            { id: 'py-l8-02', title: 'finally et else', theory: `<h2>finally et else</h2><pre><code>try:\n    n = int("42")\nexcept ValueError:\n    print("Erreur")\nelse:\n    print(f"OK: {n}")\nfinally:\n    print("Termine")</code></pre><p class="lesson-extra">else s'execute si tout va bien et finally s'execute toujours. L'exemple montre la structure complete d'un try.</p>`, exercise: { instruction: 'try/except/else pour convertir "42". Si ok, affiche "OK: 42". Si erreur, "Erreur".', starterCode: '# try/except/else\n', validation: { type: 'output', expected: 'OK: 42' }, hints: ['try:', '    n = int("42")'], xpReward: 50 } },
            { id: 'py-l8-03', title: 'raise', theory: `<h2>Lever ses propres erreurs</h2><pre><code>def diviser(a, b):\n    if b == 0:\n        raise ValueError("Division par zero !")\n    return a / b</code></pre><p class="lesson-extra">raise permet de lancer une erreur personnalisee. L'exemple montre comment valider une condition et signaler un probleme.</p>`, exercise: { instruction: 'Cree <strong>verifier_age(age)</strong> qui raise ValueError si age < 0. Teste avec -5.', starterCode: '# Ta fonction\n\n\n# Teste\n', validation: { type: 'output', expected: 'Age invalide' }, hints: ['def verifier_age(age):', '    if age < 0: raise ValueError("Age invalide")'], xpReward: 75 } },
        ],
    },
    {
        id: 9, slug: 'poo', title: 'Classes et POO', subtitle: 'Programmation orientee objet',
        icon: 'üèóÔ∏è', color: '#3776ab', requiredXP: 5200,
        lessons: [
            { id: 'py-l9-01', title: 'Creer une classe', theory: `<h2>Les classes</h2><pre><code>class Personne:\n    def __init__(self, nom, age):\n        self.nom = nom\n        self.age = age\n\n    def saluer(self):\n        print(f"Bonjour, je suis {self.nom}")</code></pre><p class="lesson-extra">Une classe definit un modele d'objet avec des attributs et methodes. L'exemple montre le constructeur __init__ et une methode.</p>`, exercise: { instruction: 'Cree <strong>Animal</strong> avec nom et son. Methode <strong>parler()</strong> : "Le [nom] fait [son]". Teste avec "Chat", "Miaou".', starterCode: '# Ta classe\n\n\n# Teste\n', validation: { type: 'output', expected: 'Le Chat fait Miaou' }, hints: ['class Animal:', '    def __init__(self, nom, son):'], xpReward: 50 } },
            { id: 'py-l9-02', title: 'Heritage', theory: `<h2>L'heritage</h2><pre><code>class Chien(Animal):\n    def parler(self):\n        print(f"{self.nom} dit: Wouf !")</code></pre><p class="lesson-extra">L'heritage permet de reutiliser et modifier une classe existante. L'exemple montre comment surcharger un comportement.</p>`, exercise: { instruction: 'Cree <strong>Vehicule(marque)</strong> et <strong>Voiture(Vehicule)</strong> avec <strong>klaxonner()</strong> -> "[marque] fait Bip !"', starterCode: '# Tes classes\n\n\n# Teste\n', validation: { type: 'output', expected: 'Tesla fait Bip !' }, hints: ['class Voiture(Vehicule):'], xpReward: 50 } },
            { id: 'py-l9-03', title: '__str__ et methodes speciales', theory: `<h2>Dunder methods</h2><pre><code>class Point:\n    def __str__(self):\n        return f"Point({self.x}, {self.y})"</code></pre><p class="lesson-extra">__str__ definit l'affichage d'un objet en texte. L'exemple montre comment personnaliser cette representation.</p>`, exercise: { instruction: 'Cree <strong>Compteur</strong> avec __init__(valeur=0) et __str__ -> "Compteur: X". Teste avec 42.', starterCode: '# Ta classe\n\n\n# Teste\n', validation: { type: 'output', expected: 'Compteur: 42' }, hints: ['def __str__(self): return f"Compteur: {self.valeur}"'], xpReward: 75 } },
        ],
    },
    {
        id: 10, slug: 'projets', title: 'Projets Pratiques', subtitle: 'Mini-projets pour tout combiner',
        icon: 'üöÄ', color: '#ffd166', requiredXP: 6300,
        lessons: [
            { id: 'py-l10-01', title: 'Projet : Calculatrice', theory: `<h2>Mini-projet : Calculatrice</h2><p class="lesson-extra">Ce projet assemble les bases pour creer une mini calculatrice. Tu vas definir des fonctions et afficher leurs resultats.</p>`, exercise: { instruction: 'Cree <strong>add, sub, mul, div</strong>. Affiche add(10,5), mul(3,4), div(20,4).', starterCode: '# Tes fonctions\n\n\n# Tests\n', validation: { type: 'output', expected: ['15', '12', '5.0'] }, hints: ['def add(a, b): return a + b'], xpReward: 75 } },
            { id: 'py-l10-02', title: 'Projet : Gestionnaire de contacts', theory: `<h2>Mini-projet : Contacts</h2><p class="lesson-extra">Ce projet te fait gerer un dictionnaire comme un petit carnet. Tu vas ajouter et afficher des contacts.</p>`, exercise: { instruction: 'Cree <strong>contacts</strong>, <strong>ajouter(nom, tel)</strong>, <strong>afficher_tous()</strong>. Ajoute Alice:0601 et Bob:0602. Affiche.', starterCode: 'contacts = {}\n\ndef ajouter(nom, tel):\n    pass\n\ndef afficher_tous():\n    pass\n\n# Utilise\n', validation: { type: 'output', expected: ['Alice: 0601', 'Bob: 0602'] }, hints: ['def ajouter(nom, tel): contacts[nom] = tel'], xpReward: 100 } },
            { id: 'py-l10-03', title: 'Projet : Analyse de donnees', theory: `<h2>Mini-projet : Analyse de notes</h2><p class="lesson-extra">Ce projet te fait filtrer des donnees d'une liste. L'objectif est d'extraire et afficher les bons elements.</p>`, exercise: { instruction: 'Affiche les noms des etudiants avec note >= 12, separes par ", ".', starterCode: 'etudiants = [\n    {"nom": "Alice", "note": 16},\n    {"nom": "Bob", "note": 8},\n    {"nom": "Charlie", "note": 14},\n    {"nom": "Diana", "note": 11},\n    {"nom": "Eve", "note": 19}\n]\n\n# Filtre et affiche\n', validation: { type: 'output', expected: 'Alice, Charlie, Eve' }, hints: ['reussis = [e["nom"] for e in etudiants if e["note"] >= 12]'], xpReward: 100 } },
        ],
    },
];

export function getCurriculum(lang) {
    return lang === 'python' ? pythonCurriculum : jsCurriculum;
}

export { jsCurriculum, pythonCurriculum };
